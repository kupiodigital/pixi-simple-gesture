'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = panable;
function panable(sprite, inertia) {

  function mouseDown(e) {
    start(e.data.originalEvent);
  }

  function touchStart(e) {
    start(e.data.originalEvent.targetTouches[0]);
  }

  function start(t) {
    if (sprite._pan) {
      if (!sprite._pan.intervalId) {
        return;
      }
      clearInterval(sprite._pan.intervalId);
      sprite.emit('panend');
    }
    sprite._pan = {
      p: {
        x: t.clientX,
        y: t.clientY,
        date: new Date()
      }
    };
    sprite.on('mousemove', mouseMove).on('touchmove', touchMove);
  }

  function mouseMove(e) {
    move(e, e.data.originalEvent);
  }

  function touchMove(e) {
    var t = e.data.originalEvent.targetTouches;
    if (!t || t.length > 1) {
      end(e, t[0]);
      return;
    }
    move(e, t[0]);
  }

  function move(e, t) {
    var now = new Date();
    var interval = now - sprite._pan.p.date;
    if (interval < 12) {
      return;
    }
    var dx = t.clientX - sprite._pan.p.x;
    var dy = t.clientY - sprite._pan.p.y;
    var distance = Math.sqrt(dx * dx + dy * dy);
    if (!sprite._pan.pp) {
      var threshold = t instanceof window.MouseEvent ? 2 : 7;
      if (distance > threshold) {
        sprite.emit('panstart');
      } else {
        return;
      }
    } else {
      var event = {
        deltaX: dx,
        deltaY: dy,
        velocity: distance / interval,
        data: e.data
      };
      sprite.emit('panmove', event);
    }
    sprite._pan.pp = {
      x: sprite._pan.p.x,
      y: sprite._pan.p.y,
      date: sprite._pan.p.date
    };
    sprite._pan.p = {
      x: t.clientX,
      y: t.clientY,
      date: now
    };
  }

  function mouseUp(e) {
    end(e, e.data.originalEvent);
  }

  function touchEnd(e) {
    end(e, e.data.originalEvent.changedTouches[0]);
  }

  function end(e, t) {
    sprite.removeListener('mousemove', mouseMove).removeListener('touchmove', touchMove);
    if (!sprite._pan || !sprite._pan.pp) {
      sprite._pan = null;
      return;
    }
    if (inertia) {
      if (sprite._pan.intervalId) {
        return;
      }
      var interval = new Date() - sprite._pan.pp.date;
      var vx = (t.clientX - sprite._pan.pp.x) / interval;
      var vy = (t.clientY - sprite._pan.pp.y) / interval;
      sprite._pan.intervalId = setInterval(function () {
        if (Math.abs(vx) < 0.04 && Math.abs(vy) < 0.04) {
          clearInterval(sprite._pan.intervalId);
          sprite.emit('panend');
          sprite._pan = null;
          return;
        }
        var touch = {
          clientX: sprite._pan.p.x + vx * 12,
          clientY: sprite._pan.p.y + vy * 12
        };
        move(e, touch);
        vx *= 0.9;
        vy *= 0.9;
      }, 12);
    } else {
      sprite.emit('panend');
      sprite._pan = null;
    }
  }

  sprite.interactive = true;
  sprite.on('mousedown', mouseDown).on('touchstart', touchStart).on('mouseup', mouseUp).on('mouseupoutside', mouseUp).on('touchend', touchEnd).on('touchendoutside', touchEnd);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9nZXN0dXJlcy9wYW4uanMiXSwibmFtZXMiOlsicGFuYWJsZSIsInNwcml0ZSIsImluZXJ0aWEiLCJtb3VzZURvd24iLCJlIiwic3RhcnQiLCJkYXRhIiwib3JpZ2luYWxFdmVudCIsInRvdWNoU3RhcnQiLCJ0YXJnZXRUb3VjaGVzIiwidCIsIl9wYW4iLCJpbnRlcnZhbElkIiwiY2xlYXJJbnRlcnZhbCIsImVtaXQiLCJwIiwieCIsImNsaWVudFgiLCJ5IiwiY2xpZW50WSIsImRhdGUiLCJEYXRlIiwib24iLCJtb3VzZU1vdmUiLCJ0b3VjaE1vdmUiLCJtb3ZlIiwibGVuZ3RoIiwiZW5kIiwibm93IiwiaW50ZXJ2YWwiLCJkeCIsImR5IiwiZGlzdGFuY2UiLCJNYXRoIiwic3FydCIsInBwIiwidGhyZXNob2xkIiwid2luZG93IiwiTW91c2VFdmVudCIsImV2ZW50IiwiZGVsdGFYIiwiZGVsdGFZIiwidmVsb2NpdHkiLCJtb3VzZVVwIiwidG91Y2hFbmQiLCJjaGFuZ2VkVG91Y2hlcyIsInJlbW92ZUxpc3RlbmVyIiwidngiLCJ2eSIsInNldEludGVydmFsIiwiYWJzIiwidG91Y2giLCJpbnRlcmFjdGl2ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBQXdCQSxPO0FBQVQsU0FBU0EsT0FBVCxDQUFrQkMsTUFBbEIsRUFBMEJDLE9BQTFCLEVBQW1DOztBQUVoRCxXQUFTQyxTQUFULENBQW9CQyxDQUFwQixFQUF1QjtBQUNyQkMsVUFBTUQsRUFBRUUsSUFBRixDQUFPQyxhQUFiO0FBQ0Q7O0FBRUQsV0FBU0MsVUFBVCxDQUFxQkosQ0FBckIsRUFBd0I7QUFDdEJDLFVBQU1ELEVBQUVFLElBQUYsQ0FBT0MsYUFBUCxDQUFxQkUsYUFBckIsQ0FBbUMsQ0FBbkMsQ0FBTjtBQUNEOztBQUVELFdBQVNKLEtBQVQsQ0FBZ0JLLENBQWhCLEVBQW1CO0FBQ2pCLFFBQUlULE9BQU9VLElBQVgsRUFBaUI7QUFDZixVQUFJLENBQUNWLE9BQU9VLElBQVAsQ0FB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bUJBQVNoQixPQUFPVSxJQUFQLENBQVlJLENBQVosQ0FBY0MsQ0FBZCxHQUFrQitCLEtBQUssRUFEdEI7QUFFVjVCLG1CQUFTbEIsT0FBT1UsSUFBUCxDQUFZSSxDQUFaLENBQWNHLENBQWQsR0FBa0I4QixLQUFLO0FBRnRCLFNBQVo7QUFJQXZCLGFBQUtyQixDQUFMLEVBQVErQyxLQUFSO0FBQ0FKLGNBQU0sR0FBTjtBQUNBQyxjQUFNLEdBQU47QUFDRCxPQWR3QixFQWN0QixFQWRzQixDQUF6QjtBQWVELEtBdEJELE1Bc0JPO0FBQ0wvQyxhQUFPYSxJQUFQLENBQVksUUFBWjtBQUNBYixhQUFPVSxJQUFQLEdBQWMsSUFBZDtBQUNEO0FBQ0Y7O0FBRURWLFNBQU9tRCxXQUFQLEdBQXFCLElBQXJCO0FBQ0FuRCxTQUNHcUIsRUFESCxDQUNNLFdBRE4sRUFDbUJuQixTQURuQixFQUVHbUIsRUFGSCxDQUVNLFlBRk4sRUFFb0JkLFVBRnBCLEVBR0djLEVBSEgsQ0FHTSxTQUhOLEVBR2lCcUIsT0FIakIsRUFJR3JCLEVBSkgsQ0FJTSxnQkFKTixFQUl3QnFCLE9BSnhCLEVBS0dyQixFQUxILENBS00sVUFMTixFQUtrQnNCLFFBTGxCLEVBTUd0QixFQU5ILENBTU0saUJBTk4sRUFNeUJzQixRQU56QjtBQU9EIiwiZmlsZSI6InBhbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhbmFibGUgKHNwcml0ZSwgaW5lcnRpYSkge1xyXG5cclxuICBmdW5jdGlvbiBtb3VzZURvd24gKGUpIHtcclxuICAgIHN0YXJ0KGUuZGF0YS5vcmlnaW5hbEV2ZW50KVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdG91Y2hTdGFydCAoZSkge1xyXG4gICAgc3RhcnQoZS5kYXRhLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXSlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN0YXJ0ICh0KSB7XHJcbiAgICBpZiAoc3ByaXRlLl9wYW4pIHtcclxuICAgICAgaWYgKCFzcHJpdGUuX3Bhbi5pbnRlcnZhbElkKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgY2xlYXJJbnRlcnZhbChzcHJpdGUuX3Bhbi5pbnRlcnZhbElkKVxyXG4gICAgICBzcHJpdGUuZW1pdCgncGFuZW5kJylcclxuICAgIH1cclxuICAgIHNwcml0ZS5fcGFuID0ge1xyXG4gICAgICBwOiB7XHJcbiAgICAgICAgeDogdC5jbGllbnRYLFxyXG4gICAgICAgIHk6IHQuY2xpZW50WSxcclxuICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNwcml0ZVxyXG4gICAgICAub24oJ21vdXNlbW92ZScsIG1vdXNlTW92ZSlcclxuICAgICAgLm9uKCd0b3VjaG1vdmUnLCB0b3VjaE1vdmUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBtb3VzZU1vdmUgKGUpIHtcclxuICAgIG1vdmUoZSwgZS5kYXRhLm9yaWdpbmFsRXZlbnQpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0b3VjaE1vdmUgKGUpIHtcclxuICAgIGxldCB0ID0gZS5kYXRhLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1xyXG4gICAgaWYgKCF0IHx8IHQubGVuZ3RoID4gMSkge1xyXG4gICAgICBlbmQoZSwgdFswXSlcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBtb3ZlKGUsIHRbMF0pXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBtb3ZlIChlLCB0KSB7XHJcbiAgICBsZXQgbm93ID0gbmV3IERhdGUoKVxyXG4gICAgbGV0IGludGVydmFsID0gbm93IC0gc3ByaXRlLl9wYW4ucC5kYXRlXHJcbiAgICBpZiAoaW50ZXJ2YWwgPCAxMikge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxldCBkeCA9IHQuY2xpZW50WCAtIHNwcml0ZS5fcGFuLnAueFxyXG4gICAgbGV0IGR5ID0gdC5jbGllbnRZIC0gc3ByaXRlLl9wYW4ucC55XHJcbiAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpXHJcbiAgICBpZiAoIXNwcml0ZS5fcGFuLnBwKSB7XHJcbiAgICAgIGxldCB0aHJlc2hvbGQgPSAodCBpbnN0YW5jZW9mIHdpbmRvdy5Nb3VzZUV2ZW50KSA/IDIgOiA3XHJcbiAgICAgIGlmIChkaXN0YW5jZSA+IHRocmVzaG9sZCkge1xyXG4gICAgICAgIHNwcml0ZS5lbWl0KCdwYW5zdGFydCcpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBldmVudCA9IHtcclxuICAgICAgICBkZWx0YVg6IGR4LFxyXG4gICAgICAgIGRlbHRhWTogZHksXHJcbiAgICAgICAgdmVsb2NpdHk6IGRpc3RhbmNlIC8gaW50ZXJ2YWwsXHJcbiAgICAgICAgZGF0YTogZS5kYXRhXHJcbiAgICAgIH1cclxuICAgICAgc3ByaXRlLmVtaXQoJ3Bhbm1vdmUnLCBldmVudClcclxuICAgIH1cclxuICAgIHNwcml0ZS5fcGFuLnBwID0ge1xyXG4gICAgICB4OiBzcHJpdGUuX3Bhbi5wLngsXHJcbiAgICAgIHk6IHNwcml0ZS5fcGFuLnAueSxcclxuICAgICAgZGF0ZTogc3ByaXRlLl9wYW4ucC5kYXRlXHJcbiAgICB9XHJcbiAgICBzcHJpdGUuX3Bhbi5wID0ge1xyXG4gICAgICB4OiB0LmNsaWVudFgsXHJcbiAgICAgIHk6IHQuY2xpZW50WSxcclxuICAgICAgZGF0ZTogbm93XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBtb3VzZVVwIChlKSB7XHJcbiAgICBlbmQoZSwgZS5kYXRhLm9yaWdpbmFsRXZlbnQpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0b3VjaEVuZCAoZSkge1xyXG4gICAgZW5kKGUsIGUuZGF0YS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdKVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZW5kIChlLCB0KSB7XHJcbiAgICBzcHJpdGVcclxuICAgICAgLnJlbW92ZUxpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmUpXHJcbiAgICAgIC5yZW1vdmVMaXN0ZW5lcigndG91Y2htb3ZlJywgdG91Y2hNb3ZlKVxyXG4gICAgaWYgKCFzcHJpdGUuX3BhbiB8fCAhc3ByaXRlLl9wYW4ucHApIHtcclxuICAgICAgc3ByaXRlLl9wYW4gPSBudWxsXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYgKGluZXJ0aWEpIHtcclxuICAgICAgaWYgKHNwcml0ZS5fcGFuLmludGVydmFsSWQpIHtcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgICBsZXQgaW50ZXJ2YWwgPSBuZXcgRGF0ZSgpIC0gc3ByaXRlLl9wYW4ucHAuZGF0ZVxyXG4gICAgICBsZXQgdnggPSAodC5jbGllbnRYIC0gc3ByaXRlLl9wYW4ucHAueCkgLyBpbnRlcnZhbFxyXG4gICAgICBsZXQgdnkgPSAodC5jbGllbnRZIC0gc3ByaXRlLl9wYW4ucHAueSkgLyBpbnRlcnZhbFxyXG4gICAgICBzcHJpdGUuX3Bhbi5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIGlmIChNYXRoLmFicyh2eCkgPCAwLjA0ICYmIE1hdGguYWJzKHZ5KSA8IDAuMDQpIHtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc3ByaXRlLl9wYW4uaW50ZXJ2YWxJZClcclxuICAgICAgICAgIHNwcml0ZS5lbWl0KCdwYW5lbmQnKVxyXG4gICAgICAgICAgc3ByaXRlLl9wYW4gPSBudWxsXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvdWNoID0ge1xyXG4gICAgICAgICAgY2xpZW50WDogc3ByaXRlLl9wYW4ucC54ICsgdnggKiAxMixcclxuICAgICAgICAgIGNsaWVudFk6IHNwcml0ZS5fcGFuLnAueSArIHZ5ICogMTJcclxuICAgICAgICB9XHJcbiAgICAgICAgbW92ZShlLCB0b3VjaClcclxuICAgICAgICB2eCAqPSAwLjlcclxuICAgICAgICB2eSAqPSAwLjlcclxuICAgICAgfSwgMTIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzcHJpdGUuZW1pdCgncGFuZW5kJylcclxuICAgICAgc3ByaXRlLl9wYW4gPSBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzcHJpdGUuaW50ZXJhY3RpdmUgPSB0cnVlXHJcbiAgc3ByaXRlXHJcbiAgICAub24oJ21vdXNlZG93bicsIG1vdXNlRG93bilcclxuICAgIC5vbigndG91Y2hzdGFydCcsIHRvdWNoU3RhcnQpXHJcbiAgICAub24oJ21vdXNldXAnLCBtb3VzZVVwKVxyXG4gICAgLm9uKCdtb3VzZXVwb3V0c2lkZScsIG1vdXNlVXApXHJcbiAgICAub24oJ3RvdWNoZW5kJywgdG91Y2hFbmQpXHJcbiAgICAub24oJ3RvdWNoZW5kb3V0c2lkZScsIHRvdWNoRW5kKVxyXG59XHJcbiJdfQ==